FROM python:3.11.6
RUN apt-get update && apt-get install -y libgl1-mesa-glx
COPY . /app/
WORKDIR /app

ARG INTERNAL_GATEWAY
ENV INTERNAL_GATEWAY=$INTERNAL_GATEWAY
ARG EXTERNAL_GATEWAY
ENV EXTERNAL_GATEWAY=$EXTERNAL_GATEWAY
ARG PING_COUNT
ENV PING_COUNT=$PING_COUNT
ARG INTERFACE_LAN
ENV INTERFACE_LAN=$INTERFACE_LAN
ARG INTERFACE_WIFI
ENV INTERFACE_WIFI=$INTERFACE_WIFI
ARG WIFI_SSID
ENV WIFI_SSID=$WIFI_SSID
ARG WIFI_BAND
ENV WIFI_BAND=$WIFI_BAND
ARG WIFI_PASSWORD
ENV WIFI_PASSWORD=$WIFI_PASSWORD

RUN pip install --upgrade pip
RUN pip install -r requirements.txt
RUN apt-get autoremove -y && apt-get clean && rm -rf /var/lib/apt/lists/*
EXPOSE 8000
CMD ["python", "main.py"]